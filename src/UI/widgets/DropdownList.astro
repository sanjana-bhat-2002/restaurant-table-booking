<div class="w-[300px] relative">
    <button id="listbox-button" class="relative flex justify-start gap-4 w-full bg-white border border-gray-300 rounded-md shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
        <span>
            <svg class="w-5 h-5" viewBox="0 0 50 45" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 25C10.35 25 6.475 28.2 5.35 32.5H0V37.5H5.35C6.475 41.8 10.35 45 15 45C19.65 45 23.525 41.8 24.65 37.5H50V32.5H24.65C23.525 28.2 19.65 25 15 25ZM15 40C12.25 40 10 37.75 10 35C10 32.25 12.25 30 15 30C17.75 30 20 32.25 20 35C20 37.75 17.75 40 15 40ZM44.65 7.5C43.525 3.2 39.65 0 35 0C30.35 0 26.475 3.2 25.35 7.5H0V12.5H25.35C26.475 16.8 30.35 20 35 20C39.65 20 43.525 16.8 44.65 12.5H50V7.5H44.65ZM35 15C32.25 15 30 12.75 30 10C30 7.25 32.25 5 35 5C37.75 5 40 7.25 40 10C40 12.75 37.75 15 35 15Z" fill="#191919"/>
            </svg>
        </span>
        <span id="selected-item" class="block truncate">Filter by location</span>
        <span class="absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none">
            <svg class="rotate-180 h-4 w-4 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l7 7a1 1 0 01-1.414 1.414L10 5.414 3.707 11.707a1 1 0 01-1.414-1.414l7-7A1 1 0 0110 3z" clip-rule="evenodd" />
            </svg>
        </span>
    </button>

    <ul id="listbox-options" class="text-left absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm hidden">
        <li class="text-gray-900 cursor-default select-none relative py-2 pl-3 pr-9 hover:bg-indigo-600 hover:text-white" data-value="Delhi">
            Delhi
        </li>
        <li class="text-gray-900 cursor-default select-none relative py-2 pl-3 pr-9 hover:bg-indigo-600 hover:text-white" data-value="Bengaluru">
            Bengaluru
        </li>
        <li class="text-gray-900 cursor-default select-none relative py-2 pl-3 pr-9 hover:bg-indigo-600 hover:text-white" data-value="Mumbai">
            Mumbai
        </li>
    </ul>
</div>


<script>
    document.addEventListener('DOMContentLoaded', () => {
    const listboxButton = document.getElementById('listbox-button') as HTMLElement;
    const listboxOptions = document.getElementById('listbox-options') as HTMLElement;
    const selectedItem = document.getElementById('selected-item') as HTMLElement;

    listboxButton?.addEventListener('click', () => {
        listboxOptions?.classList.toggle('hidden');
    });

    listboxOptions?.addEventListener('click', (event) => {
        // Type assertion to HTMLElement to access tagName
        const target = event.target as HTMLElement;
        if (target.tagName === 'LI') {
            selectedItem.textContent = target.getAttribute('data-value');
            listboxOptions.classList.add('hidden');
        }
    });

    document.addEventListener('click', (event) => {
        if (!listboxButton.contains(event.target as Node) && !listboxOptions.contains(event.target as Node)) {
            listboxOptions?.classList.add('hidden');
        }
    });
});

</script>